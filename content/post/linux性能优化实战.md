---
title: "Linux性能优化实战"
date: 2020-08-04T19:26:15+08:00
draft: true
tags: ["极客时间"]
---

> **本文为倪朋飞老师的<<Linux 性能优化实战>>学习笔记**

<!--more-->

# CPU 性能篇

## 平均负载 

### 概念介绍
> 平均负载: 单位时间内，系统处于可运行状态和不可中断状态的平均进程数， 也就是平均活跃进程数，它和 CPU 使用率并没有直接关系
> - 可运行状态: 正在使用 CPU 或者正在等待 CPU 的进程: ps 命令看到的，处于 R 状态的进程
> - 不可中断状态: 处于内核态关键流程中的进程，不可打断，常见是等待设备 I/O 的响应：ps 命令看到的，处于 D 状态的进程, 系统对进程和硬件设备的一种保护机制

**平均负载最理想的情况是等于 CPU 的个数: ```grep 'model name' /proc/cpuinfo | wc -l```**
- 当平均负载高于呀 CPU 数量的 70% 时， 需要分析排查性能负载高的问题了。

### 平均负载和 CPU 使用率

- 平均负载是指单位时间内，处于可运行状态和不可中 断状态的进程数。不仅包括了正在使用 CPU 的进程，还包括等待 CPU 和等待 I/O 的进程。
- CPU 使用率，是单位时间内 CPU 繁忙情况的统计，跟平均负载并不一定完全对应。
> 例如: CPU 密集型进程，使用大量 CPU 会导致平均负载升高，此时这两者是一致的; I/O 密集型进程，等待 I/O 也会导致平均负载升高，但 CPU 使用率不一定很高; 大量等待 CPU 的进程调度也会导致平均负载升高，此时的 CPU 使用率也会比较高。

### 案例分析

#### 测试工具
- stress: 一个 Linux 系统压力测试工具，这里我们用作异常进程模拟平均负载升高的场景。
- sysstat: 包含了常用的 Linux 性能工具，用来监控和分析系统的性能(mpstat 和 pidstat)


# 内存性能篇

# IO 性能篇

# 网络性能篇

# 综合实战